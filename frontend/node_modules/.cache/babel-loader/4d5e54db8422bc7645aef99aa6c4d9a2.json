{"ast":null,"code":"var _jsxFileName = \"/Users/mo/Concordia-bootcamp/day39-ProjectSlingair/project-slingair/frontend/src/components/SeatSelect/ReservationForm.js\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport { FlightContext } from \"../FlightContext\";\nimport { useHistory } from \"react-router-dom\";\n\nconst {\n  v4: uuidv4\n} = require(\"uuid\");\n\nconst Reservation = () => {\n  let history = useHistory();\n  let allReservations = [];\n  const {\n    state: {\n      flightNumber,\n      selectedSeat\n    },\n    actions: {\n      completedReservation\n    }\n  } = React.useContext(FlightContext);\n  const initalState = {\n    firstName: \"\",\n    lastName: \"\",\n    email: \"\"\n  };\n  const [inputValue, setInputValue] = React.useState(initalState);\n  const [validation, setValidation] = React.useState(true); //Sending the data to backend\n\n  const submitHandler = e => {\n    e.preventDefault();\n    e.stopPropagation(); //call the end point\n    //Check for number of selected seats and generate enough reservatins\n\n    selectedSeat.map(everySeat => {\n      const requestReservation = {\n        id: uuidv4(),\n        flight: flightNumber,\n        seat: everySeat,\n        givenName: inputValue.firstName,\n        surname: inputValue.lastName,\n        email: inputValue.email\n      };\n      allReservations.push(requestReservation);\n      fetch(\"/slingair/reservations\", {\n        method: \"POST\",\n        body: JSON.stringify(requestReservation),\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(res => res.json()).then(data => {\n        if (data.status === 400) {\n          setValidation(false);\n\n          if (validation) {\n            history.push(\"/confirmed\");\n            completedReservation(allReservations);\n          }\n        }\n      });\n    }); //\n    //Store Items to local storage\n\n    allReservations.forEach((reserv, index) => {\n      localStorage.setItem(`reservation-${index}`, reserv.id);\n    }); //\n    //\n  };\n\n  let requiredInfo = false;\n\n  if (inputValue.firstName !== \"\" && inputValue.lastName !== \"\" && inputValue.email !== \"\" && flightNumber !== \"\" && selectedSeat.length > 0) {\n    requiredInfo = true;\n  }\n\n  return /*#__PURE__*/React.createElement(StyledFormDiv, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: submitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: e => setInputValue({ ...inputValue,\n      firstName: e.target.value\n    }),\n    placeholder: \"First Name\",\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: e => setInputValue({ ...inputValue,\n      lastName: e.target.value\n    }),\n    placeholder: \"Last Name\",\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: e => setInputValue({ ...inputValue,\n      email: e.target.value\n    }),\n    placeholder: \"Email Name\",\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }\n  }, validation ? \"\" : \"Invalid information please try again\"), requiredInfo ? /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, \"Confirm\") : /*#__PURE__*/React.createElement(\"button\", {\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 11\n    }\n  }, \"Confirm\")));\n};\n\nconst StyledFormDiv = styled.div`\n  border: 2px solid var(--color-cadmium-red);\n  padding: 2.5rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  input {\n    margin: 1rem 0rem;\n    display: block;\n  }\n  button {\n    width: 100%;\n    color: var(--color-selective-yellow);\n    background: var(--color-alabama-crimson);\n    border: 2px solid var(--color-cadmium-red);\n    cursor: pointer;\n    &:disabled {\n      background: #c5c5c5;\n      color: white;\n      cursor: not-allowed;\n    }\n  }\n`;\nexport default Reservation;","map":{"version":3,"sources":["/Users/mo/Concordia-bootcamp/day39-ProjectSlingair/project-slingair/frontend/src/components/SeatSelect/ReservationForm.js"],"names":["React","styled","FlightContext","useHistory","v4","uuidv4","require","Reservation","history","allReservations","state","flightNumber","selectedSeat","actions","completedReservation","useContext","initalState","firstName","lastName","email","inputValue","setInputValue","useState","validation","setValidation","submitHandler","e","preventDefault","stopPropagation","map","everySeat","requestReservation","id","flight","seat","givenName","surname","push","fetch","method","body","JSON","stringify","headers","Accept","then","res","json","data","status","forEach","reserv","index","localStorage","setItem","requiredInfo","length","target","value","StyledFormDiv","div"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,aAAT,QAA8B,kBAA9B;AACA,SAASC,UAAT,QAA2B,kBAA3B;;AACA,MAAM;AAAEC,EAAAA,EAAE,EAAEC;AAAN,IAAiBC,OAAO,CAAC,MAAD,CAA9B;;AAEA,MAAMC,WAAW,GAAG,MAAM;AACxB,MAAIC,OAAO,GAAGL,UAAU,EAAxB;AACA,MAAIM,eAAe,GAAG,EAAtB;AAEA,QAAM;AACJC,IAAAA,KAAK,EAAE;AAAEC,MAAAA,YAAF;AAAgBC,MAAAA;AAAhB,KADH;AAEJC,IAAAA,OAAO,EAAE;AAAEC,MAAAA;AAAF;AAFL,MAGFd,KAAK,CAACe,UAAN,CAAiBb,aAAjB,CAHJ;AAIA,QAAMc,WAAW,GAAG;AAClBC,IAAAA,SAAS,EAAE,EADO;AAElBC,IAAAA,QAAQ,EAAE,EAFQ;AAGlBC,IAAAA,KAAK,EAAE;AAHW,GAApB;AAMA,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BrB,KAAK,CAACsB,QAAN,CAAeN,WAAf,CAApC;AACA,QAAM,CAACO,UAAD,EAAaC,aAAb,IAA8BxB,KAAK,CAACsB,QAAN,CAAe,IAAf,CAApC,CAfwB,CAgBxB;;AACA,QAAMG,aAAa,GAAIC,CAAD,IAAO;AAC3BA,IAAAA,CAAC,CAACC,cAAF;AACAD,IAAAA,CAAC,CAACE,eAAF,GAF2B,CAG3B;AACA;;AACAhB,IAAAA,YAAY,CAACiB,GAAb,CAAkBC,SAAD,IAAe;AAC9B,YAAMC,kBAAkB,GAAG;AACzBC,QAAAA,EAAE,EAAE3B,MAAM,EADe;AAEzB4B,QAAAA,MAAM,EAAEtB,YAFiB;AAGzBuB,QAAAA,IAAI,EAAEJ,SAHmB;AAIzBK,QAAAA,SAAS,EAAEf,UAAU,CAACH,SAJG;AAKzBmB,QAAAA,OAAO,EAAEhB,UAAU,CAACF,QALK;AAMzBC,QAAAA,KAAK,EAAEC,UAAU,CAACD;AANO,OAA3B;AAQAV,MAAAA,eAAe,CAAC4B,IAAhB,CAAqBN,kBAArB;AACAO,MAAAA,KAAK,CAAC,wBAAD,EAA2B;AAC9BC,QAAAA,MAAM,EAAE,MADsB;AAE9BC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeX,kBAAf,CAFwB;AAG9BY,QAAAA,OAAO,EAAE;AACPC,UAAAA,MAAM,EAAE,kBADD;AAEP,0BAAgB;AAFT;AAHqB,OAA3B,CAAL,CAQGC,IARH,CAQSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EARjB,EASGF,IATH,CASSG,IAAD,IAAU;AACd,YAAIA,IAAI,CAACC,MAAL,KAAgB,GAApB,EAAyB;AACvBzB,UAAAA,aAAa,CAAC,KAAD,CAAb;;AACA,cAAID,UAAJ,EAAgB;AACdf,YAAAA,OAAO,CAAC6B,IAAR,CAAa,YAAb;AACAvB,YAAAA,oBAAoB,CAACL,eAAD,CAApB;AACD;AACF;AACF,OAjBH;AAkBD,KA5BD,EAL2B,CAmC3B;AACA;;AACAA,IAAAA,eAAe,CAACyC,OAAhB,CAAwB,CAACC,MAAD,EAASC,KAAT,KAAmB;AACzCC,MAAAA,YAAY,CAACC,OAAb,CAAsB,eAAcF,KAAM,EAA1C,EAA6CD,MAAM,CAACnB,EAApD;AACD,KAFD,EArC2B,CAwC3B;AACA;AACD,GA1CD;;AA2CA,MAAIuB,YAAY,GAAG,KAAnB;;AACA,MACEnC,UAAU,CAACH,SAAX,KAAyB,EAAzB,IACAG,UAAU,CAACF,QAAX,KAAwB,EADxB,IAEAE,UAAU,CAACD,KAAX,KAAqB,EAFrB,IAGAR,YAAY,KAAK,EAHjB,IAIAC,YAAY,CAAC4C,MAAb,GAAsB,CALxB,EAME;AACAD,IAAAA,YAAY,GAAG,IAAf;AACD;;AAED,sBACE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,QAAQ,EAAE9B,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,QAAQ,EAAGC,CAAD,IACRL,aAAa,CAAC,EACZ,GAAGD,UADS;AAEZH,MAAAA,SAAS,EAAES,CAAC,CAAC+B,MAAF,CAASC;AAFR,KAAD,CAFjB;AAOE,IAAA,WAAW,EAAC,YAPd;AAQE,IAAA,IAAI,EAAC,MARP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAWE;AACE,IAAA,QAAQ,EAAGhC,CAAD,IACRL,aAAa,CAAC,EACZ,GAAGD,UADS;AAEZF,MAAAA,QAAQ,EAAEQ,CAAC,CAAC+B,MAAF,CAASC;AAFP,KAAD,CAFjB;AAOE,IAAA,WAAW,EAAC,WAPd;AAQE,IAAA,IAAI,EAAC,MARP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXF,eAqBE;AACE,IAAA,QAAQ,EAAGhC,CAAD,IACRL,aAAa,CAAC,EACZ,GAAGD,UADS;AAEZD,MAAAA,KAAK,EAAEO,CAAC,CAAC+B,MAAF,CAASC;AAFJ,KAAD,CAFjB;AAOE,IAAA,WAAW,EAAC,YAPd;AAQE,IAAA,IAAI,EAAC,MARP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IArBF,eAgCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAMnC,UAAU,GAAG,EAAH,GAAQ,sCAAxB,CAhCF,EAiCGgC,YAAY,gBACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADW,gBAGX;AAAQ,IAAA,QAAQ,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eApCJ,CADF,CADF;AA2CD,CAlHD;;AAoHA,MAAMI,aAAa,GAAG1D,MAAM,CAAC2D,GAAI;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAvBA;AAwBA,eAAerD,WAAf","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport { FlightContext } from \"../FlightContext\";\nimport { useHistory } from \"react-router-dom\";\nconst { v4: uuidv4 } = require(\"uuid\");\n\nconst Reservation = () => {\n  let history = useHistory();\n  let allReservations = [];\n\n  const {\n    state: { flightNumber, selectedSeat },\n    actions: { completedReservation },\n  } = React.useContext(FlightContext);\n  const initalState = {\n    firstName: \"\",\n    lastName: \"\",\n    email: \"\",\n  };\n\n  const [inputValue, setInputValue] = React.useState(initalState);\n  const [validation, setValidation] = React.useState(true);\n  //Sending the data to backend\n  const submitHandler = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    //call the end point\n    //Check for number of selected seats and generate enough reservatins\n    selectedSeat.map((everySeat) => {\n      const requestReservation = {\n        id: uuidv4(),\n        flight: flightNumber,\n        seat: everySeat,\n        givenName: inputValue.firstName,\n        surname: inputValue.lastName,\n        email: inputValue.email,\n      };\n      allReservations.push(requestReservation);\n      fetch(\"/slingair/reservations\", {\n        method: \"POST\",\n        body: JSON.stringify(requestReservation),\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n      })\n        .then((res) => res.json())\n        .then((data) => {\n          if (data.status === 400) {\n            setValidation(false);\n            if (validation) {\n              history.push(\"/confirmed\");\n              completedReservation(allReservations);\n            }\n          }\n        });\n    });\n\n    //\n    //Store Items to local storage\n    allReservations.forEach((reserv, index) => {\n      localStorage.setItem(`reservation-${index}`, reserv.id);\n    });\n    //\n    //\n  };\n  let requiredInfo = false;\n  if (\n    inputValue.firstName !== \"\" &&\n    inputValue.lastName !== \"\" &&\n    inputValue.email !== \"\" &&\n    flightNumber !== \"\" &&\n    selectedSeat.length > 0\n  ) {\n    requiredInfo = true;\n  }\n\n  return (\n    <StyledFormDiv>\n      <form onSubmit={submitHandler}>\n        <input\n          onChange={(e) =>\n            setInputValue({\n              ...inputValue,\n              firstName: e.target.value,\n            })\n          }\n          placeholder=\"First Name\"\n          type=\"text\"\n        />\n        <input\n          onChange={(e) =>\n            setInputValue({\n              ...inputValue,\n              lastName: e.target.value,\n            })\n          }\n          placeholder=\"Last Name\"\n          type=\"text\"\n        />\n        <input\n          onChange={(e) =>\n            setInputValue({\n              ...inputValue,\n              email: e.target.value,\n            })\n          }\n          placeholder=\"Email Name\"\n          type=\"text\"\n        />\n\n        <div>{validation ? \"\" : \"Invalid information please try again\"}</div>\n        {requiredInfo ? (\n          <button>Confirm</button>\n        ) : (\n          <button disabled>Confirm</button>\n        )}\n      </form>\n    </StyledFormDiv>\n  );\n};\n\nconst StyledFormDiv = styled.div`\n  border: 2px solid var(--color-cadmium-red);\n  padding: 2.5rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  input {\n    margin: 1rem 0rem;\n    display: block;\n  }\n  button {\n    width: 100%;\n    color: var(--color-selective-yellow);\n    background: var(--color-alabama-crimson);\n    border: 2px solid var(--color-cadmium-red);\n    cursor: pointer;\n    &:disabled {\n      background: #c5c5c5;\n      color: white;\n      cursor: not-allowed;\n    }\n  }\n`;\nexport default Reservation;\n"]},"metadata":{},"sourceType":"module"}